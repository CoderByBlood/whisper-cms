{# templates/configure.html #}
<!DOCTYPE html>
<html lang="en" x-data="{ loading: false, error: '{{ error.clone().unwrap_or_default() }}' }">
<head>
    <meta charset="UTF-8" />
    <title>Configure</title>
    <script src="https://unpkg.com/htmx.org@1.9.10" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@3.4.1/dist/tailwind.min.css" rel="stylesheet">
</head>
<body class="bg-gray-100 min-h-screen flex items-center justify-center p-4">

    <div class="bg-white p-6 rounded shadow-md w-full max-w-md">
        <!-- Password Login -->
        <form 
            hx-post="/login"
            hx-target="#login-response"
            hx-swap="outerHTML"
            hx-on::beforeRequest="loading = true"
            hx-on::afterRequest="loading = false"
            class="space-y-4"
        >
            <h1 class="text-xl font-semibold">Admin Login</h1>
            <input type="password" name="password" placeholder="Admin Password"
                   class="w-full border px-3 py-2 rounded focus:outline-none focus:ring focus:border-blue-300" required />

            <button type="submit"
                class="bg-blue-600 text-white w-full py-2 rounded hover:bg-blue-700"
                :disabled="loading">
                <span x-show="!loading">Login</span>
                <span x-show="loading">Logging in...</span>
            </button>

            <div x-show="error" class="text-red-500 text-sm" x-text="error"></div>
        </form>
    </div>

    <!-- Swap target: HTMX will replace this div with db_config.html -->
    <div id="login-response"></div>

</body>
</html>